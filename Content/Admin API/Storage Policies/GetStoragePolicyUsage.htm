<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:lastBlockDepth="10" MadCap:lastHeight="994" MadCap:lastWidth="828">
    <head>
    </head>
    <body>
        <h1>GET Storage Policy Usage (Bucket List)</h1>
        <p class="TopicTag" MadCap:conditions="General.Online">[Admin API Method]</p>
        <p>Use this Admin API method to retrieve a list of the buckets that are using each storage policy. For all storage policies in the system, this method returns the policy ID and name and the corresponding list of buckets using that policy.</p>
        <MadCap:dropDown>
            <MadCap:dropDownHead class="CloudianParentDropDown">
                <MadCap:dropDownHotspot>Request Format</MadCap:dropDownHotspot>
            </MadCap:dropDownHead>
            <MadCap:dropDownBody>
                <h4>Syntax</h4><pre xml:space="preserve">GET /bppolicy/bucketsperpolicy HTTP/1.1</pre>
                <h4>Query Parameters</h4>
                <p>None.</p>
                <h4>Request Payload</h4>
                <p>None.</p>
            </MadCap:dropDownBody>
        </MadCap:dropDown>
        <MadCap:dropDown>
            <MadCap:dropDownHead class="CloudianParentDropDown">
                <MadCap:dropDownHotspot>Response Format</MadCap:dropDownHotspot>
            </MadCap:dropDownHead>
            <MadCap:dropDownBody>
                <h4>Response Status</h4>
                <p>This method returns only the <MadCap:xref href="../CommonStatusCodes.htm" target="_popup">Common Status Codes.</MadCap:xref></p>
                <h4>Response Payload</h4>
                <p>A <em>text/plain</em> bucket list per storage policy, in this format:</p><pre xml:space="preserve">Policy Name: &lt;policyName&gt; Id: &lt;policyId&gt; Buckets: &lt;bucket1&gt;,&lt;bucket2&gt;,&lt;bucket3&gt;...
Policy Name: &lt;policyName&gt; Id: &lt;policyId&gt; Buckets: &lt;bucket1&gt;,&lt;bucket2&gt;,&lt;bucket3&gt;...
...
...</pre>
            </MadCap:dropDownBody>
        </MadCap:dropDown>
        <MadCap:dropDown>
            <MadCap:dropDownHead class="CloudianParentDropDown">
                <MadCap:dropDownHotspot>Example</MadCap:dropDownHotspot>
            </MadCap:dropDownHead>
            <MadCap:dropDownBody>
                <p>In this example a list of buckets per storage policy is successfully retrieved. There are two storage policies in the system. The "EC4-2" storage policy does not yet have any buckets using it.</p><pre xml:space="preserve"># Request -&gt;

GET http://10.50.10.16:18081/bppolicy/bucketsperpolicy

# Response -&gt;

Status Code: 200 OK
Content-Length: 192
Content-Type: text/plain
Date: Thu, 22 Oct 2015 13:51:54 GMT
Policy Name: HSFSPolicy_region1 Id: 182ac62af70e3ed2451c213078c8520f Buckets: buser2,buser3,
buser4,buser5,buser6,buser7,buser1
Policy Name: EC4-2 Id: f2c60bd2975c6f7e40f0da9fc4b7a9cc Buckets:</pre>
            </MadCap:dropDownBody>
        </MadCap:dropDown>
    </body>
</html>