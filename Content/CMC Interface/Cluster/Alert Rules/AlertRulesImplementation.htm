<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:lastBlockDepth="6" MadCap:lastHeight="1393" MadCap:lastWidth="815">
    <head>
    </head>
    <body>
        <h1>How HyperStore Implements Alerts</h1>
        <p>In the CMC's <b><a href="../../../Resources/Images/cmc/cluster/AlertRules.png" target="_popup">Alert Rules</a></b> page (or through the Admin API method <MadCap:xref href="../../../Admin API/System Monitoring/PutNewNotificationRule.htm" target="_popup">PUT New Notification Rule</MadCap:xref>) you can create rules for having the HyperStore system generate alerts when specified events occur. When an event covered by an alert rule occurs, the HyperStore system:</p>
        <ul>
            <li>Sends an SNMP trap, if the alert rule for the event includes sending an SNMP trap. The trap is sent to the SNMP destination configured in the <MadCap:xref href="../Configuration Settings/ConfigurationSettingsSNMP.htm" target="_popup">SNMP Trap Destination Settings</MadCap:xref> section of the CMC’s <b>Configuration Settings</b> page.</li>
            <li>Displays an alert in the CMC’s <MadCap:xref href="../Node Status/NodeStatusOverview.htm" target="_popup">Node Status</MadCap:xref> page (in the <b>Alert List</b> for the node on which the event occurred) and also in the <MadCap:xref href="../../Alerts/AlertsOverview.htm" target="_popup">Alerts</MadCap:xref> page.</li>
            <li>Emails an alert notification to specified system administrator addresses (unless you disable email notification, which you can do on a per-rule basis as described in <MadCap:xref href="AlertRulesEdit.htm" target="_popup">Edit an Alert Rule</MadCap:xref>).</li>
        </ul>
        <p>Alerting through the CMC and through email and SNMP is implemented as follows:</p>
        <ul>
            <li>When the event that is specified by the alert rule occurs, an alert email is sent to the configured email address(es), and a trap is sent if you’ve enabled SNMP as part of the rule. An alert notice is also displayed on the <MadCap:xref href="../Node Status/NodeStatusOverview.htm" target="_popup">Node Status</MadCap:xref> page and on the <MadCap:xref href="../../Alerts/AlertsOverview.htm" target="_popup">Alerts</MadCap:xref> page.</li>
            <li>The sending of the alert email sets off a 24 hour hold on any further alert emails in association with the same alert rule on the same node. The same hold period applies to SNMP trap sending. The 24 hour hold works like this:<ul style="list-style-type: circle;"><li>So long as the original instance of the alert remains unacknowledged by administrators, any additional events that trigger the same alert rule on the same node will not generate additional email notifications (or SNMP traps). Such additional event instances will only generate additional alerts in the CMC interface, so that the alert’s "Count" value increments.</li><li>As soon as an administrator <a href="../../Alerts/AlertsAcknowledge.htm" target="_popup">acknowledges the alert</a> in the CMC’s <b>Node Status</b> page or in the <b>Alerts</b> page, the 24 hour hold is lifted and any new instances of the event will trigger a new email notification (and SNMP trap if enabled).</li><li>If 24 hours pass without the original alert being acknowledged by an administrator, then the next subsequent instance of the event will trigger the sending of a new alert email (and SNMP trap if enabled). This then initiates a new 24 hour hold period.</li></ul></li>
        </ul>
        <h2>Handling of Alerts for ERROR or WARN Log Messages</h2>
        <p>For alert rules based on ERROR messages in service logs, an alert is written to the CMC’s <MadCap:xref href="../Node Status/NodeStatusOverview.htm" target="_popup">Node Status</MadCap:xref> page and <MadCap:xref href="../../Alerts/AlertsOverview.htm" target="_popup">Alerts</MadCap:xref> page for <b>each individual ERROR message</b> that occurs in the service logs. For alert rules based on WARN messages in service logs, the alerts are written for each individual WARN message that occurs in the service logs and also for each individual ERROR message.</p>
        <p>However, for purposes of email notification, each additional log message from the same service is considered the same type of "event", and consequently the 24 hour hold described above applies. For example, if you have an alert rule in place for ERROR messages in the S3 service logs:</p>
        <ul>
            <li>If ERROR message "X" appears in the S3 service log on node1, an alert is written to the CMC’s <b>Node Status</b> and <b>Alerts</b> pages, and an email notification is sent.</li>
            <li>If 10 minutes later ERROR message "X" appears again in the S3 service log on node1, another alert is written to the CMC’s <b>Node Status</b> and <b>Alerts</b> pages, but no additional email notification is sent.</li>
            <li>If 10 minutes later ERROR message "Y" appears in the S3 service log on node1, another alert is written to the CMC’s <b>Node Status</b> and <b>Alerts</b> pages, but no additional email notification is sent. Although ERROR message "Y" is different from ERROR message "X", it’s still considered to be part of the same alert rule and consequently it does not trigger an additional email notification.</li>
        </ul>
        <p class="Note" MadCap:autonum="&lt;b&gt;Note &#160;&lt;/b&gt;">In describing alerting behavior for the second and third messages, the scenario above presumes that no administrator has yet acknowledged the earlier ERROR message alert. Recall that <a href="../../Alerts/AlertsAcknowledge.htm" target="_popup">acknowledging an alert</a> releases the 24-hour hold on additional emails for that alert type, in which case a new instance of the underlying event triggers a new email notification.</p>
    </body>
</html>