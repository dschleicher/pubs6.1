<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:lastBlockDepth="6" MadCap:lastHeight="1174" MadCap:lastWidth="815">
    <head>
    </head>
    <body>
        <h1>Creating a "Whitelist" for Free Traffic</h1>
        <p>There may be certain source domains from which you want users to be able to submit S3 requests to the HyperStore system without incurring any data transfer charges. The HyperStore system allows you to create such a "whitelist", consisting of IPv4 addresses and/or subnets. For traffic originating from these addresses or subnets, there is no charge for data IN or data OUT, nor is there any charge for HTTP requests — regardless of users' assigned rating plans.</p>
        <p>Note that the whitelist does not have any impact on what users are charged for data <b>storage</b>. It allows only for free <b>traffic</b> from the specified origin domains.</p>
        <p>You can creating a billing whitelist through either the CMC or the Admin API. But before doing so, you must enable the whitelist feature. It is disabled by default.</p>
        <MadCap:dropDown>
            <MadCap:dropDownHead class="CloudianParentDropDown">
                <MadCap:dropDownHotspot>Enabling the Whitelist Feature</MadCap:dropDownHotspot>
            </MadCap:dropDownHead>
            <MadCap:dropDownBody>
                <p>To enable the HyperStore billing whitelist feature:</p>
                <ol>
                    <li>On your Puppet master node, open the following configuration file in a text editor:</li>
                </ol>
                <div class="Indent"><pre>/etc/cloudian-&lt;version&gt;-puppet/manifests/extdata/common.csv</pre>
                </div>
                <ol MadCap:continue="true">
                    <li>Set <em>admin_whitelist_enabled</em> to true, then save your change.</li>
                    <li>Still on your Puppet master node, launch the HyperStore installer:</li>
                </ol>
                <div class="Indent"><pre xml:space="preserve">[root]# &lt;your-installation-staging-directory&gt;/cloudianInstall.sh</pre>
                </div>
                <ol MadCap:continue="true">
                    <li>Select "Cluster Management" and then from the sub-menu that displays select "Push Configuration Settings to Cluster". This propagates your configuration file change to all of your HyperStore nodes.</li>
                    <li>From the Cluster Management sub-menu select "Manage Services", then restart your S3 Service. This applies your configuration change to the S3 Service.</li>
                    <li>Still on the Service Management sub-menu, restart the CMC. This applies the configuration change to the CMC.</li>
                </ol>
            </MadCap:dropDownBody>
        </MadCap:dropDown>
        <MadCap:dropDown>
            <MadCap:dropDownHead class="CloudianParentDropDown">
                <MadCap:dropDownHotspot>Creating a Source IP "Whitelist" (CMC)</MadCap:dropDownHotspot>
            </MadCap:dropDownHead>
            <MadCap:dropDownBody>
                <p>To create a whitelist through the CMC, use the <MadCap:xref href="../../CMC Interface/Users &amp; Groups/Whitelist.htm">Whitelist</MadCap:xref> page. That page shows the ID and name of the default whitelist, which initially has no IP addresses in it. To create a functioning whitelist, you edit the default whitelist by adding IP addresses or subnets to it.</p>
                <p>Once created, the whitelist takes effect. From that time forward, the HyperStore billing system will no longer apply traffic charges to users' traffic originating from the whitelisted IP addresses and subnets.</p>
                <p class="Note" MadCap:autonum="&lt;b&gt;Note &#160;&lt;/b&gt;">	If you want to see a particular user’s whitelisted traffic volume during a given billing period, you can do so as part of the HyperStore system’s functionality for <MadCap:xref href="BillingGenerate.htm">Generating Billing Data for a User</MadCap:xref>.</p>
            </MadCap:dropDownBody>
        </MadCap:dropDown>
        <MadCap:dropDown>
            <MadCap:dropDownHead class="CloudianParentDropDown">
                <MadCap:dropDownHotspot>Creating a Source IP "Whitelist" (Admin API)</MadCap:dropDownHotspot>
            </MadCap:dropDownHead>
            <MadCap:dropDownBody>
                <p>The HyperStore Admin API provides two different methods for creating a whitelist:</p>
                <ul>
                    <li>Use the <a href="../../Admin API/Whitelist for Free Traffic/PostUpdatedWhitelistViaRequestObject.htm">POST /whitelist</a> method to post your whitelist as a JSON-encoded request payload.</li>
                    <li>Use the <a href="../../Admin API/Whitelist for Free Traffic/PostUpdatedWhitelistViaUriParameter.htm">POST /whitelist/list</a> method to post your whitelist as a URI parameter.</li>
                </ul>
                <p>The Admin API also supports a <a href="../../Admin API/Whitelist for Free Traffic/GetWhitelist.htm">GET /whitelist</a> method for retrieving the contents of your current whitelist.</p>
            </MadCap:dropDownBody>
        </MadCap:dropDown>
        <p>&#160;</p>
        <p><b>See Also:</b>
        </p>
        <ul>
            <li>
                <MadCap:xref href="BillingGenerate.htm">Generating Billing Data for a User</MadCap:xref>
            </li>
        </ul>
    </body>
</html>