<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" data-mc-search-type="Stem" data-mc-help-system-file-name="HyperStoreHelp.xml" data-mc-path-to-help-system="../../../" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-toc-path="Admin API|Methods|Usage Reporting">
    <!-- saved from url=(0016)http://localhost -->
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>POST Usage Data Rollup</title>
        <link href="../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../Resources/Stylesheets/styles.css" rel="stylesheet" />
        <script src="../../../Resources/Scripts/custom.modernizr.js">
        </script>
        <script src="../../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../../Resources/Scripts/require.min.js">
        </script>
        <script src="../../../Resources/Scripts/require.config.js">
        </script>
        <script src="../../../Resources/Scripts/foundation.min.js">
        </script>
        <script src="../../../Resources/Scripts/plugins.min.js">
        </script>
        <script src="../../../Resources/Scripts/MadCapAll.js">
        </script>
    </head>
    <body>
        <div class="TopicContent">
            <div class="MCBreadcrumbsBox_0"><span class="MCBreadcrumbsPrefix">You are here: </span><a class="MCBreadcrumbsLink" href="../AdminApiOverview.htm">Admin API</a><span class="MCBreadcrumbsDivider"> &gt; </span><span class="MCBreadcrumbsSelf">Methods</span><span class="MCBreadcrumbsDivider"> &gt; </span><a class="MCBreadcrumbsLink" href="UsageReportingOverview.htm">Usage Reporting</a><span class="MCBreadcrumbsDivider"> &gt; </span><span class="MCBreadcrumbs">POST Usage Data Rollup</span>
            </div>
            <h1>POST Usage Data Rollup</h1>
            <p class="TopicTag" data-mc-conditions="General.Online">[Admin API Method]</p>
            <p>Use this method to trigger the generation of "rollup" (aggregated) service usage data from more granular data. Hourly rollup data is derived from "raw" transactional data. Daily rollup data and monthly rollup data are derived from hourly rollup data.</p>
            <p>This method does not return the rolled up service usage data in the response, it only generates the rollup data and stores it in the system. To retrieve service usage data use <a href="GetUsageData.htm" class="MCXref xref">GET Usage Data</a>.</p>
            <p class="Note" data-mc-autonum="&lt;b&gt;Note &#160;&lt;/b&gt;"><span class="autonumber"><span><b>Note &#160;</b></span></span>The <em>POST Usage Data Rollup</em> operation is triggered regularly by HyperStore <a href="../../Maintenance/CronJobs.htm#Usage" class="MCTopicPopup MCTopicPopupHotSpot MCXref xref">Usage Data Processing</a> cron jobs. The cron job to create hourly rollup data runs each hour; the cron job to create daily rollup data runs once per day; and the cron job to create monthly rollup data runs once per month.</p>
            <p class="Note" data-mc-autonum="&lt;b&gt;Note &#160;&lt;/b&gt;"><span class="autonumber"><span><b>Note &#160;</b></span></span>The rollup operations act only on usage data in the local service region. In a multi-region system, the rollup operations must be run locally in each region. Consequently, system cron jobs that trigger these operations are configured in each region.</p>
            <div class="MCDropDown MCDropDown_Open dropDown"><span class="MCDropDownHead dropDownHead dropDownHeadCloudianParentDropDown"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="16" width="16" alt="Closed" data-mc-alt2="Open" />Request Format</a></span>
                <div class="MCDropDownBody dropDownBody">
                    <h4>Syntax</h4><pre xml:space="preserve">POST /usage/rollup?granularity=xxx&amp;startTime=xxx&amp;unitCount=xxx</pre>
                    <h4>Query Parameters</h4>
                    <div class="MCDropDown MCDropDown_Open dropDown"><span class="MCDropDownHead dropDownHead dropDownHeadCloudianChildDropDown"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="16" width="16" alt="Closed" data-mc-alt2="Open" />granularity</a></span>
                        <div class="MCDropDownBody dropDownBody">
                            <div class="Indent">
                                <p>(Mandatory, string) Time period granularity of data to generate. Supported values are:</p>
                                <ul>
                                    <li value="1"><em>hour</em> — Hourly rollup data.</li>
                                    <li value="2"><em>day</em>  — Daily rollup data.</li>
                                    <li value="3"><em>month</em>  — Monthly rollup data.</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="MCDropDown MCDropDown_Open dropDown"><span class="MCDropDownHead dropDownHead dropDownHeadCloudianChildDropDown"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="16" width="16" alt="Closed" data-mc-alt2="Open" />startTime</a></span>
                        <div class="MCDropDownBody dropDownBody">
                            <div class="Indent">
                                <p>(Mandatory, string) Start time (GMT) of data to rollup.</p>
                                <ul>
                                    <li value="1">For hourly rollup data use format <em>yyyyMMddHH</em> to specify the time at which to start the rollup.</li>
                                    <li value="2">For daily rollup data use format <em>yyyyMMdd</em> to specify the first day to include in the rollup.</li>
                                    <li value="3">For monthly rollup data use format <em>yyyyMM</em> to specify specify the first month to include in the rollup.</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="MCDropDown MCDropDown_Open dropDown"><span class="MCDropDownHead dropDownHead dropDownHeadCloudianChildDropDown"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="16" width="16" alt="Closed" data-mc-alt2="Open" />unitCount</a></span>
                        <div class="MCDropDownBody dropDownBody">
                            <div class="Indent">
                                <p>(Mandatory, integer) &#160;The number of units of your chosen "granularity" for which to do the rollup (i.e., the number of hours, days, or months for which to generate rollup data). Must be positive integer.</p>
                                <p>For example, if "granularity" = hour and "unitCount" = 3, then an hourly rollup will be performed for each of the three hours that follow your designated "startTime".</p>
                                <p>Using a high "unitCount" value can cause <code>POST /usage/rollup</code> to be a time-consuming operation. As an alternative, if for example you want hourly rollups for a large number of hours, you can run a separate<code> POST /usage/rollup</code> call for each hourly rollup, sequentially, with "unitCount" = 1 and the appropriate "startTime" for each hourly rollup.</p>
                            </div>
                        </div>
                    </div>
                    <h4>Request Payload</h4>
                    <p>None.</p>
                </div>
            </div>
            <div class="MCDropDown MCDropDown_Open dropDown"><span class="MCDropDownHead dropDownHead dropDownHeadCloudianParentDropDown"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="16" width="16" alt="Closed" data-mc-alt2="Open" />Response Format</a></span>
                <div class="MCDropDownBody dropDownBody">
                    <h4>Response Status</h4>
                    <p>In addition to the <a href="../CommonStatusCodes.htm" class="MCTopicPopup MCTopicPopupHotSpot MCXref xref">Common Response Status Codes</a>, this method may return these codes:</p>
                    <table style="border-collapse: separate;border-top-left-radius: 0px;border-top-right-radius: 0px;border-bottom-right-radius: 0px;border-bottom-left-radius: 0px;border-left-style: solid;border-left-width: 1px;border-right-style: solid;border-right-width: 1px;border-top-style: solid;border-top-width: 1px;border-bottom-style: solid;border-bottom-width: 1px;width: 100%;">
                        <col style="width: 115px;" />
                        <col style="width: 629px;" />
                        <thead>
                            <tr>
                                <th style="border-left-style: solid;border-left-width: 1px;border-right-style: solid;border-right-width: 1px;border-top-style: solid;border-top-width: 1px;border-bottom-style: solid;border-bottom-width: 1px;padding-left: 4px;">Status Code</th>
                                <th style="border-left-style: solid;border-left-width: 1px;border-right-style: solid;border-right-width: 1px;border-top-style: solid;border-top-width: 1px;border-bottom-style: solid;border-bottom-width: 1px;padding-left: 4px;">Description</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td style="border-left-style: solid;border-left-width: 1px;border-right-style: solid;border-right-width: 1px;border-top-style: solid;border-top-width: 1px;border-bottom-style: solid;border-bottom-width: 1px;padding-left: 4px;text-align: center;">400</td>
                                <td style="padding-left: 4px;padding-right: 4px;padding-top: 4px;padding-bottom: 4px;border-left-style: solid;border-left-width: 1px;border-right-style: solid;border-right-width: 1px;border-top-style: solid;border-top-width: 1px;border-bottom-style: solid;border-bottom-width: 1px;text-align: left;">Missing or invalid parameters</td>
                            </tr>
                        </tbody>
                    </table>
                    <h4>Response Payload</h4>
                    <p>None.</p>
                </div>
            </div>
            <div class="MCDropDown MCDropDown_Open dropDown"><span class="MCDropDownHead dropDownHead dropDownHeadCloudianParentDropDown"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="16" width="16" alt="Closed" data-mc-alt2="Open" />Example</a></span>
                <div class="MCDropDownBody dropDownBody">
                    <p>In this example an hourly roll-up of service usage data is successfully triggered. The operation rolls up raw data for a one hour period starting at midnight on September 28, 2015.</p><pre xml:space="preserve"># Request -&gt;

POST http://192.168.2.16:18081/usage/rollup?granularity=hour&amp;startTime=2015092800&amp;unitCount=1

# Response -&gt;

Status Code: 200 OK
Content-Length: 0
Date: Wed, 30 Sep 2015 14:25:59 GMT</pre>
                </div>
            </div>
            <p style="font-size: 6pt;margin-top: 0;margin-bottom: 0;">&#160;</p>
        </div>
    </body>
</html>