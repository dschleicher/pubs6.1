<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" data-mc-search-type="Stem" data-mc-help-system-file-name="HyperStoreHelp.xml" data-mc-path-to-help-system="../../../" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-toc-path="Installing HyperStore">
    <!-- saved from url=(0016)http://localhost -->
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>Advanced Installation Configuration Options</title>
        <link href="../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../Resources/Stylesheets/styles.css" rel="stylesheet" />
        <script src="../../../Resources/Scripts/custom.modernizr.js">
        </script>
        <script src="../../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../../Resources/Scripts/require.min.js">
        </script>
        <script src="../../../Resources/Scripts/require.config.js">
        </script>
        <script src="../../../Resources/Scripts/foundation.min.js">
        </script>
        <script src="../../../Resources/Scripts/plugins.min.js">
        </script>
        <script src="../../../Resources/Scripts/MadCapAll.js">
        </script>
    </head>
    <body>
        <div class="TopicContent">
            <div class="MCBreadcrumbsBox_0"><span class="MCBreadcrumbsPrefix">You are here: </span><a class="MCBreadcrumbsLink" href="../InstallationOverview.htm">Installing HyperStore</a><span class="MCBreadcrumbsDivider"> &gt; </span><span class="MCBreadcrumbs">Advanced Installation Configuration Options</span>
            </div>
            <h1>Advanced Installation Configuration Options</h1>
            <p>The HyperStore installation tool supports several types of advanced system configurations which can be implemented at any time after initial installation of the system. In most cases, these are configuration tasks that can also be performed manually by editing system configuration files. The installer makes these tasks easier by enabling you to perform the configurations by responding to prompts from the installer.</p>
            <p class="Note" data-mc-autonum="&lt;b&gt;Note &#160;&lt;/b&gt;"><span class="autonumber"><span><b>Note &#160;</b></span></span>As a best practice, you should complete basic HyperStore installation first and confirm that things are working properly (by running the installer’s Validation Tests) before you consider using the advanced configuration option to customize port assignments or implement SSL for the S3 Service.</p>
            <p>To access the advanced configuration options, first launch the installer.</p><pre xml:space="preserve">[root]# cd &lt;your-installation-staging-directory&gt;
[root]# ./cloudianInstall.sh</pre>
            <p>This opens the installer’s main menu.</p>
            <p><a class="MCPopupThumbnailLink MCPopupThumbnailHover" href="../../Resources/Images/installation/MainMenu.png"><img class="MCPopupThumbnail img imgImgCloudian" data-mc-width="624" data-mc-height="273" src="../../Resources/Images/installation/MainMenu_thumb_0_60.png" tabindex="" /></a>
            </p>
            <p>Select "Advanced Configuration Options". This opens the "Advanced Configuration Options" sub-menu.</p>
            <p><a class="MCPopupThumbnailLink MCPopupThumbnailHover" href="../../Resources/Images/installation/AdvancedConfigurationOptions.png"><img class="MCPopupThumbnail img imgImgCloudian" data-mc-width="629" data-mc-height="365" src="../../Resources/Images/installation/AdvancedConfigurationOptions_thumb_0_60.png" tabindex="" /></a>
            </p>
            <p>From this menu you can choose the type of configuration change that you want to make and then proceed through the interactive prompts to specify your desired settings. </p>
            <div class="MCDropDown MCDropDown_Open dropDown"><span class="MCDropDownHead dropDownHead dropDownHeadCloudianParentDropDown"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="16" width="16" alt="Closed" data-mc-alt2="Open" />Change server role assignments</a></span>
                <div class="MCDropDownBody dropDownBody">
                    <p>This is for shifting role assignments — such as Redis QoS master or Redis Credentials master — from one of the hosts in your cluster to another. For the complete procedures, see <a href="../../Operations/Change Node Role/ChangeNodeRoleOverview.htm" class="MCXref xref">Change Node Role Assignments</a>.</p>
                </div>
            </div>
            <div class="MCDropDown MCDropDown_Open dropDown"><span class="MCDropDownHead dropDownHead dropDownHeadCloudianParentDropDown"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="16" width="16" alt="Closed" data-mc-alt2="Open" />Change S3, Admin and CMC ports</a></span>
                <div class="MCDropDownBody dropDownBody">
                    <p>This lets you interactively change listening ports for the S3, Admin, and CMC services.</p>
                    <ol>
                        <li value="1">After selecting this option from the Advanced Configuration Options menu, follow the prompts to specify your desired port numbers.</li>
                        <li value="2">Go to the installer’s main menu and choose "Install Cloudian HyperStore" → "Review Cluster Configuration". Answer Yes to update the Puppet master configuration.</li>
                        <li value="3">Go to the main menu again and choose "Cluster Management" → "Push Configuration Settings to Cluster" and follow the prompts.</li>
                        <li value="4">Go to the "Cluster Management" menu again, choose "Manage Services", and restart the affected services:</li>
                    </ol>
                    <div class="Indent">
                        <ul>
                            <li value="1"> For changed S3 or Admin ports, restart the S3 Service and the CMC. Note that the Admin service is restarted automatically when you restart the S3 Service. </li>
                            <li value="2">For changed CMC port, restart the CMC</li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="MCDropDown MCDropDown_Open dropDown"><span class="MCDropDownHead dropDownHead dropDownHeadCloudianParentDropDown"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="16" width="16" alt="Closed" data-mc-alt2="Open" />Change S3, S3-Website, and CMC endpoints</a></span>
                <div class="MCDropDownBody dropDownBody">
                    <p>This lets you interactively change the S3 service endpoint, S3 static website endpoint, and CMC endpoint. (For more information on HyperStore service endpoints, their default values, and how the endpoints are used, see <a href="../Networking Preparation/DnsSetup.htm" class="MCTopicPopup MCTopicPopupHotSpot MCXref xref">DNS Set-Up</a>.)</p>
                    <ol>
                        <li value="1">After selecting this option from the Advanced Configuration Options menu, follow the prompts to specify your desired endpoints.</li>
                    </ol>
                    <div class="Indent">
                        <div class="MCDropDown MCDropDown_Open dropDown"><span class="MCDropDownHead dropDownHead dropDownHeadCloudianChildDropDown"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="16" width="16" alt="Closed" data-mc-alt2="Open" />Note for <b>multi-region systems</b> only</a></span>
                            <div class="MCDropDownBody dropDownBody">
                                <p>If you have a multi-region HyperStore system <b>and your customized S3 service endpoint and S3 static website endpoint do not include a service region string</b>, then make the system configuration change described below. (If you retained a region string in your custom S3 endpoints, this configuration file edit isn't necessary and you can skip ahead to Step 2.)</p>
                                <ol style="list-style-type: lower-alpha;">
                                    <li value="1">In a text editor open this file on your Puppet master node:</li>
                                </ol>
                                <div class="Indent"><pre>/etc/cloudian-&lt;ver#&gt;-puppet/modules/cloudians3/templates/mts.properties.erb</pre>
                                </div>
                                <ol style="list-style-type: lower-alpha;" data-mc-continue="true">
                                    <li value="2">Find this line in the file:</li>
                                </ol>
                                <div class="Indent"><pre>cloudian.s3.authorizationV4.singleregioncheck=false</pre>
                                </div>
                                <ol style="list-style-type: lower-alpha;" data-mc-continue="true">
                                    <li value="3">Below that found line, add this new line and then save your change and close the file:</li>
                                </ol>
                                <div class="Indent"><pre>cloudian.s3.authorizationV4.multiregioncheck=false</pre>
                                    <p>This disables the region validation aspect of AWS Signature Version 4 authentication in a multi-region system.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <ol data-mc-continue="true">
                        <li value="2">Go to the installer’s main menu and choose "Install Cloudian HyperStore" → "Review Cluster Configuration". Answer Yes to update the Puppet master configuration.</li>
                        <li value="3">Go to the main menu again and choose "Cluster Management" → "Push Configuration Settings to Cluster" and follow the prompts.</li>
                        <li value="4">Go to the "Cluster Management" menu again, choose "Manage Services", and restart the S3 Service and the CMC. If you are using DNSMASQ for HyperStore service endpoint resolution, then also restart DNSMASQ. (If instead you are using your DNS environment for HyperStore service endpoint resolution, update your DNS entries to match your custom endpoints if you have not already done so. For guidance see <a href="../Networking Preparation/DnsSetup.htm" class="MCXref xref">DNS Set-Up</a>.)</li>
                    </ol>
                </div>
            </div>
            <div class="MCDropDown MCDropDown_Open dropDown"><span class="MCDropDownHead dropDownHead dropDownHeadCloudianParentDropDown"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="16" width="16" alt="Closed" data-mc-alt2="Open" />Configure diagnostic data collection options</a></span>
                <div class="MCDropDownBody dropDownBody">
                    <p>This lets you interactively configure Phone Home (Smart Support) settings.</p>
                    <ol>
                        <li value="1">After selecting this option from the Advanced Configuration Options menu, follow the prompts to specify your desired settings.</li>
                        <li value="2">Go to the installer’s main menu and choose "Install Cloudian HyperStore" → "Review Cluster Configuration". Answer Yes to update the Puppet master configuration.</li>
                        <li value="3">Go to the main menu again and choose "Cluster Management" → "Push Configuration Settings to Cluster" and follow the prompts.</li>
                        <li value="4">Go to the "Cluster Management" menu again, choose "Manage Services", and restart the S3 Service.</li>
                    </ol>
                </div>
            </div>
            <div class="MCDropDown MCDropDown_Open dropDown"><span class="MCDropDownHead dropDownHead dropDownHeadCloudianParentDropDown"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="16" width="16" alt="Closed" data-mc-alt2="Open" />Generate a self-signed certificate in a JKS keystore</a></span>
                <div class="MCDropDownBody dropDownBody">
                    <p>This generates a SSL certificate that you can use for implementing SSL for the S3 Service. For instructions on using this option, see SSL for S3 Service in the Cloudian HyperStore Administrator’s Guide [XREF].</p>
                </div>
            </div>
            <div class="MCDropDown MCDropDown_Open dropDown"><span class="MCDropDownHead dropDownHead dropDownHeadCloudianParentDropDown"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="16" width="16" alt="Closed" data-mc-alt2="Open" />Enable and configure HTTPS access on S3 server</a></span>
                <div class="MCDropDownBody dropDownBody">
                    <p>This configures the S3 Service to use HTTPS, using a specified SSL keystore. For instructions on using this option, see SSL for S3 Service in the Cloudian HyperStore Administrator’s Guide. [XREF]</p>
                </div>
            </div>
            <div class="MCDropDown MCDropDown_Open dropDown"><span class="MCDropDownHead dropDownHead dropDownHeadCloudianParentDropDown"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="16" width="16" alt="Closed" data-mc-alt2="Open" />Import Java keystore to CMC</a></span>
                <div class="MCDropDownBody dropDownBody">
                    <p>This enables you to use a specified SSL keystore for the CMC server rather than its default keystore. For instructions on using this option, see SSL for CMC in the Cloudian HyperStore Administrator’s Guide. [XREF]</p>
                </div>
            </div>
            <div class="MCDropDown MCDropDown_Open dropDown"><span class="MCDropDownHead dropDownHead dropDownHeadCloudianParentDropDown"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="16" width="16" alt="Closed" data-mc-alt2="Open" />Remove existing Puppet SSL certificates</a></span>
                <div class="MCDropDownBody dropDownBody">
                    <p>This is a troubleshooting measure in the event of Puppet connectivity problems, as described in <a href="InstallationTroubleshooting.htm" class="MCXref xref">Installation Troubleshooting</a>.</p>
                    <p>This operation is specifically in regard to Puppet certificates and has nothing to do with SSL for the S3 Service.</p>
                </div>
            </div>
            <div class="MCDropDown MCDropDown_Open dropDown"><span class="MCDropDownHead dropDownHead dropDownHeadCloudianParentDropDown"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="16" width="16" alt="Closed" data-mc-alt2="Open" />Start or stop Puppet daemon</a></span>
                <div class="MCDropDownBody dropDownBody">
                    <p>By default, after HyperStore installation the Puppet master and agent daemons are left running, and every 10 minutes the agents check the master to see if there are updated HyperStore configuration settings to download to the agent nodes. Alternatively you can use this option from the Advanced menu to stop the Puppet agent daemons.</p>
                    <p>Note that if you don’t leave the Puppet agent daemons running, you must remember to trigger a one-time Puppet sync-up each time you make a HyperStore configuration change on the Puppet master. By contrast, if you leave the Puppet agent daemons running, a sync-up will happen automatically every 10 minutes even if you don’t specifically trigger a sync-up after making a configuration change.</p>
                    <p>If you ever want to check on the current status of your Puppet master and agent daemons, you can do so by choosing "Cluster Management" from the installer’s main menu; then choose "Manage Services"; then in the Service Management sub-menu choose "Puppet service (status only)".</p>
                </div>
            </div>
            <div class="MCDropDown MCDropDown_Open dropDown"><span class="MCDropDownHead dropDownHead dropDownHeadCloudianParentDropDown"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="16" width="16" alt="Closed" data-mc-alt2="Open" />Remove Puppet access lock</a></span>
                <div class="MCDropDownBody dropDownBody">
                    <p>When Puppet is performing a sync-up, the system temporarily locks Puppet access (so that no additional Puppet instances are launched by other operators or systems). If the sync-up operation is terminated unexpectedly — such as by a &lt;CTRL&gt;-c command, or a Puppet master node shutdown — the temporary lock may fail to release.</p>
                    <p>You can clear the lock by running the "Remove Puppet access lock" operation.</p>
                    <p>To confirm that the lock is cleared, you can check to make sure that no <em>/tmp/cloudian_installer_lock</em> directory exists on the Puppet master node.</p>
                </div>
            </div>
            <div class="MCDropDown MCDropDown_Open dropDown"><span class="MCDropDownHead dropDownHead dropDownHeadCloudianParentDropDown"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="16" width="16" alt="Closed" data-mc-alt2="Open" />Enable or disable DNSMASQ</a></span>
                <div class="MCDropDownBody dropDownBody">
                    <p>This menu option is for either of these circumstances:</p>
                    <ul>
                        <li value="1">When you ran the <em>cloudianInstall.sh</em> script to install your HyperStore system, you had the script automatically install and configure <a href="http://www.thekelleys.org.uk/dnsmasq/doc.html" target="_blank">dnsmasq</a> to perform DNS resolution for HyperStore service domains. (That is, you used the <em>configure-dnsmasq</em> option when you launched the install script.) However, now you want to use your own DNS solution for resolving HyperStore domains, and you’ve completed your DNS configuration as described in <a href="../Networking Preparation/DnsSetup.htm" class="MCTopicPopup MCTopicPopupHotSpot MCXref xref">DNS Set-Up</a>. You can use the installer’s "Enable or disable DNSMASQ" menu option to disable dnsmasq. This stops <em>dnsmasq</em> on all HyperStore nodes and disables <em>dnsmasq</em> by configuration.</li>
                        <li value="2">When you ran the <em>cloudianInstall.sh</em> script to install your HyperStore system, you did <b>not</b> have it install <em>dnsmasq</em> (the default installer behavior is not to install <em>dnsmasq</em>). However, now you want to use <em>dnsmasq</em> for HyperStore domain resolution. With the installer’s "Enable or disable DNSMASQ" menu option you can enable <em>dnsmasq</em>:</li>
                    </ul>
                    <div class="Indent">
                        <ol>
                            <li value="1">After selecting this option from the Advanced Configuration Options menu, follow the prompts to choose to enable <em>dnsmasq</em>. </li>
                            <li value="2">Go to the installer’s main menu and choose "Install Cloudian HyperStore" → "Review Cluster Configuration". Answer Yes to update the Puppet master configuration.</li>
                            <li value="3">Go to the main menu again and choose "Cluster Management" → "Push Configuration Settings to Cluster" and follow the prompts.</li>
                            <li value="4">Go to the "Cluster Management" menu again, choose "Manage Services", and restart the DNSMASQ service.</li>
                        </ol>
                    </div>
                </div>
            </div>
            <div class="MCDropDown MCDropDown_Open dropDown"><span class="MCDropDownHead dropDownHead dropDownHeadCloudianParentDropDown"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="16" width="16" alt="Closed" data-mc-alt2="Open" />Mark host(s) down for maintenance</a></span>
                <div class="MCDropDownBody dropDownBody">
                    <p>Use this option if you want to add a new node to the cluster at a time when an existing node is down. For the full procedure see <a href="../../Operations/AddNode.htm" class="MCXref xref">Adding a Node</a>.</p>
                </div>
            </div>
            <p style="font-size: 6pt;margin-top: 0;margin-bottom: 0;">&#160;</p>
        </div>
    </body>
</html>