<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" data-mc-search-type="Stem" data-mc-help-system-file-name="HyperStoreHelp.xml" data-mc-path-to-help-system="../../../" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-toc-path="CMC Interface|Cluster|Advanced|Info Commands">
    <!-- saved from url=(0016)http://localhost -->
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>hsstool whereis</title>
        <link href="../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../Resources/Stylesheets/styles.css" rel="stylesheet" />
        <script src="../../../Resources/Scripts/custom.modernizr.js">
        </script>
        <script src="../../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../../Resources/Scripts/require.min.js">
        </script>
        <script src="../../../Resources/Scripts/require.config.js">
        </script>
        <script src="../../../Resources/Scripts/foundation.min.js">
        </script>
        <script src="../../../Resources/Scripts/plugins.min.js">
        </script>
        <script src="../../../Resources/Scripts/MadCapAll.js">
        </script>
    </head>
    <body>
        <div class="TopicContent">
            <div class="MCBreadcrumbsBox_0"><span class="MCBreadcrumbsPrefix">You are here: </span><a class="MCBreadcrumbsLink" href="../../CMC Interface/CmcInterfaceOverview.htm">CMC Interface</a><span class="MCBreadcrumbsDivider"> &gt; </span><a class="MCBreadcrumbsLink" href="../../CMC Interface/Cluster/ClusterOverview.htm">Cluster</a><span class="MCBreadcrumbsDivider"> &gt; </span><a class="MCBreadcrumbsLink" href="../../CMC Interface/Cluster/Advanced/AdvancedOverview.htm">Advanced</a><span class="MCBreadcrumbsDivider"> &gt; </span><span class="MCBreadcrumbs">whereis</span>
            </div>
            <h1>hsstool whereis</h1>
            <p class="TopicTag" data-mc-conditions="General.Online">[Command]</p>
            <p>This <a href="hsstoolOverview.htm" class="MCTopicPopup MCTopicPopupHotSpot MCXref xref">hsstool </a> command returns the current storage location of  each replica of a specified S3 object (or in the case of erasure coded objects, the location of  each of the objectâ€™s fragments). The command response also shows the specified object's metadata such as last modified timestamp and object digest.</p>
            <div class="MCDropDown MCDropDown_Open dropDown"><span class="MCDropDownHead dropDownHead dropDownHeadCloudianParentDropDown"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="16" width="16" alt="Closed" data-mc-alt2="Open" />Command Format</a></span>
                <div class="MCDropDownBody dropDownBody">
                    <p>You can run the <em>hsstool whereis</em> command through the CMC UI:</p>
                    <p>
                        <img src="../../Resources/Images/cmc/cluster/Advanced_whereis_768x392.png" style="width: 768;height: 392;" />
                    </p>
                    <p>Or on the command line:</p><pre xml:space="preserve">[root]# /opt/cloudian/bin/hsstool [-h &lt;host&gt;] whereis &lt;bucket&gt;/&lt;object&gt; [-v &lt;version&gt;]

OR

[root]# /opt/cloudian/bin/hsstool [-h &lt;host&gt;] whereis -a</pre>
                    <h3>Parameters</h3>
                    <p>This command supports these parameters:</p>
                    <div class="MCDropDown MCDropDown_Open dropDown"><span class="MCDropDownHead dropDownHead dropDownHeadCloudianChildDropDown"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="16" width="16" alt="Closed" data-mc-alt2="Open" />-h &lt;host&gt; (called "Target Node" in CMC UI)</a></span>
                        <div class="MCDropDownBody dropDownBody">
                            <p>(Optional on command line; mandatory in CMC) You can use any node in the storage cluster as the target host. The  command retrieves information that is available via any node that belongs to the cluster. Defaults to local host if you do not supply <em>-h &lt;host&gt;</em> on the command line.</p>
                        </div>
                    </div>
                    <div class="MCDropDown MCDropDown_Open dropDown"><span class="MCDropDownHead dropDownHead dropDownHeadCloudianChildDropDown"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="16" width="16" alt="Closed" data-mc-alt2="Open" />&lt;bucket&gt;/&lt;object&gt;</a></span>
                        <div class="MCDropDownBody dropDownBody">
                            <p>(Mandatory unless using the <em>-a</em> option) Bucket name, followed by a forward slash, followed by the full object name (including "folder path", if any). For example, <em>mybucket/file1.txt </em>or <em>mybucket/Videos/Vacation/Italy_2016-06-27.mpg</em>.</p>
                            <p>If the object name has spaces in it, enclose the <em>bucket/object</em> name pair in quotes. For example, <em>"mybucket/big document.doc".</em> <![CDATA[ ]]></p>
                            <p>The <em>bucket/object</em> name is case-sensitive.</p>
                            <p class="Note" data-mc-autonum="&lt;b&gt;Note &#160;&lt;/b&gt;"><span class="autonumber"><span><b>Note &#160;</b></span></span>In the CMC UI implementation of this command, you enter the bucket name and the full object name (including folder path) in separate fields. For example, bucket name <em>mybucket</em> and full object name <em>Videos/Vacation/Italy_2016-06-27.mpg</em>.</p>
                        </div>
                    </div>
                    <div class="MCDropDown MCDropDown_Open dropDown"><span class="MCDropDownHead dropDownHead dropDownHeadCloudianChildDropDown"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="16" width="16" alt="Closed" data-mc-alt2="Open" />-v &lt;version&gt;</a></span>
                        <div class="MCDropDownBody dropDownBody">
                            <p>(Optional) Version ID of the object, if versioning has been used for the object. Versions are identified by <em>timeuuid</em> values in hexadecimal format (for example, "fe1be647-5f3b-e87f-b433-180373cf31f5"). If versioning has been used for the object but you do not specify a version number in this field, the operation returns location information for the most recent version of the object.</p>
                        </div>
                    </div>
                    <div class="MCDropDown MCDropDown_Open dropDown"><span class="MCDropDownHead dropDownHead dropDownHeadCloudianChildDropDown"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="16" width="16" alt="Closed" data-mc-alt2="Open" />-a</a></span>
                        <div class="MCDropDownBody dropDownBody">
                            <p>(Optional) Use the <em>-a</em> option if you want a full list of <b>all replicas of all objects in the entire service region</b>. This information will be written to a log file. For more information on the log file, see <a href="#WhereisLogfile" class="MCXref xref selected">Log File for "whereis -a"</a> below.</p>
                            <p class="Note" data-mc-autonum="&lt;b&gt;Note &#160;&lt;/b&gt;"><span class="autonumber"><span><b>Note &#160;</b></span></span>The CMC does not support the <em>-a</em> option. To use this option you need to use <em>hsstool whereis</em> on the command line.</p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="MCDropDown MCDropDown_Open dropDown"><span class="MCDropDownHead dropDownHead dropDownHeadCloudianParentDropDown"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="16" width="16" alt="Closed" data-mc-alt2="Open" /></a><a name="Command/"></a><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_" style="background-image: none; padding: 0px;">Command/Response Example  and Response Description</a></span>
                <div class="MCDropDownBody dropDownBody">
                    <p>The <em>whereis</em> command example below retrieves location information for a an object named "object2.txt". There are three replicas of the object in the system. Response item descriptions follow the example.</p><pre xml:space="preserve">[root]# /opt/cloudian/bin/hsstool -h cloudian-node1 whereis pubs.bucket/object2.txt
Key: pubs.bucket/object2.txt
Policy ID: d8d492e9482859017701fee7ff94b649
Version: null
Create Time: 2015-12-09T16:46:53.409Z
Last Modified: 2015-12-09T16:46:53.409Z
Last Access Time: 2015-12-09T16:46:53.428Z
Size: 556
Type: REPLICAS
[DC1 10.50.200.201 vm1] pubs.bucket/object2.txt file://10.50.200.201:/cloudian1/hsfs/
1jamLybV6jaoW9PYjdBL14/d8d492e9482859017701fee7ff94b649/
008/022/75564101245606568843264719989271142664.1449679613409
Last Modified:2015-12-09T16:46:53.409Z Version:null Digest:f0875d672f76c3c7f8626874000691ce
[DC1 10.50.200.203 vm3] pubs.bucket/object2.txt file://10.50.200.203:/cloudian11/hsfs/
1kdvre9gjLjrtawIABKf0H/d8d492e9482859017701fee7ff94b649/008/022/
75564101245606568843264719989271142664.1449679613409
Last Modified:2015-12-09T16:46:53.409Z Version:null Digest:f0875d672f76c3c7f8626874000691ce
[DC1 10.50.200.206 vm6] pubs.bucket/object2.txt file://10.50.200.206:/cloudian6/hsfs/
1lBJbme4ntOEW7fwVxBo5u/d8d492e9482859017701fee7ff94b649/008/022/
75564101245606568843264719989271142664.1449679613409
Last Modified:2015-12-09T16:46:53.409Z Version:null Digest:f0875d672f76c3c7f8626874000691ce</pre>
                    <p>The <em>whereis</em> command results consist of the following items:</p>
                    <div class="MCDropDown MCDropDown_Open dropDown"><span class="MCDropDownHead dropDownHead dropDownHeadCloudianChildDropDown"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="16" width="16" alt="Closed" data-mc-alt2="Open" />Key</a></span>
                        <div class="MCDropDownBody dropDownBody">
                            <p>Key that uniquely identifies the S3 object, in format <em>&lt;bucketname&gt;/&lt;objectname&gt;</em>. For example, <em>bucket1/Documents/Meetings_2016-06-27.docx</em>.</p>
                        </div>
                    </div>
                    <div class="MCDropDown MCDropDown_Open dropDown"><span class="MCDropDownHead dropDownHead dropDownHeadCloudianChildDropDown"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="16" width="16" alt="Closed" data-mc-alt2="Open" />PolicyID</a></span>
                        <div class="MCDropDownBody dropDownBody">
                            <p>System-generated identifier of the storage policy that applies to the bucket in which this object is stored.</p>
                        </div>
                    </div>
                    <div class="MCDropDown MCDropDown_Open dropDown"><span class="MCDropDownHead dropDownHead dropDownHeadCloudianChildDropDown"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="16" width="16" alt="Closed" data-mc-alt2="Open" />Version</a></span>
                        <div class="MCDropDownBody dropDownBody">
                            <p>Object version, if versioning has been used for the object. Versions are identified by timeuuid values in hexadecimal format. If versioning has not been used for the object, the Version field displays "null".</p>
                        </div>
                    </div>
                    <div class="MCDropDown MCDropDown_Open dropDown"><span class="MCDropDownHead dropDownHead dropDownHeadCloudianChildDropDown"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="16" width="16" alt="Closed" data-mc-alt2="Open" />Create Time</a></span>
                        <div class="MCDropDownBody dropDownBody">
                            <p>Timestamp for the original creation of the object. Format is ISO 8601 and the time is in Coordinated Universal Time (UTC).</p>
                        </div>
                    </div>
                    <div class="MCDropDown MCDropDown_Open dropDown"><span class="MCDropDownHead dropDownHead dropDownHeadCloudianChildDropDown"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="16" width="16" alt="Closed" data-mc-alt2="Open" />Last Modified</a></span>
                        <div class="MCDropDownBody dropDownBody">
                            <p>Timestamp for last modification of the object. Format is ISO 8601 and time is in UTC.</p>
                        </div>
                    </div>
                    <div class="MCDropDown MCDropDown_Open dropDown"><span class="MCDropDownHead dropDownHead dropDownHeadCloudianChildDropDown"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="16" width="16" alt="Closed" data-mc-alt2="Open" />Last Access Time</a></span>
                        <div class="MCDropDownBody dropDownBody">
                            <p>Timestamp for last access of the object. An objectâ€™s Last Access Time is updated if the object is accessed either for retrieval (GET or HEAD) or modification (PUT/POST/Copy). Format is ISO 8601 and time is in UTC.</p>
                        </div>
                    </div>
                    <div class="MCDropDown MCDropDown_Open dropDown"><span class="MCDropDownHead dropDownHead dropDownHeadCloudianChildDropDown"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="16" width="16" alt="Closed" data-mc-alt2="Open" />Size</a></span>
                        <div class="MCDropDownBody dropDownBody">
                            <p>The objectâ€™s size in bytes.</p>
                        </div>
                    </div>
                    <div class="MCDropDown MCDropDown_Open dropDown"><span class="MCDropDownHead dropDownHead dropDownHeadCloudianChildDropDown"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="16" width="16" alt="Closed" data-mc-alt2="Open" />Type</a></span>
                        <div class="MCDropDownBody dropDownBody">
                            <p>One of:</p>
                            <ul>
                                <li value="1">REPLICASâ€‰â€”â€‰The object is replicated in the HyperStore File System (HSFS).</li>
                                <li value="2">ECâ€‰â€”â€‰The object is erasure coded in the HSFS.</li>
                                <li value="3">TRANSITIONEDâ€‰â€”â€‰The object has been transitioned (<a href="../../Major Features/Auto-Tiering/AutoTieringOverview.htm" class="MCTopicPopup MCTopicPopupHotSpot a">auto-tiered</a>) to a different storage system such as Amazon S3.</li>
                            </ul>
                        </div>
                    </div>
                    <div class="MCDropDown MCDropDown_Open dropDown"><span class="MCDropDownHead dropDownHead dropDownHeadCloudianChildDropDown"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="16" width="16" alt="Closed" data-mc-alt2="Open" />URL</a></span>
                        <div class="MCDropDownBody dropDownBody">
                            <p>This field appears only in the case of TRANSITIONED objects. For such objects, this field shows the URL that identifies the location of the object in the tiering destination system. For example:</p><pre>http://s3.amazonaws.com/bucket2.mdazyjgxnjyxndu2ody4mji1nty3/notes.txt</pre>
                            <p>In this example, the tiering destination is Amazon S3; the bucket name in the destination system is <em>bucket2.mdazyjgxnjyxndu2ody4mji1nty3</em> (which is the HyperStore source bucket nameâ€‰â€”â€‰<em>bucket2</em> in this caseâ€‰â€”â€‰appended by a 28 character random string); and the object name is <em>notes.txt</em>. Note that the URL field will specify the transfer protocol as <em>http</em>, whereas to actually access the object in the destination system the protocol would typically be <em>https</em>.</p>
                        </div>
                    </div>
                    <div class="MCDropDown MCDropDown_Open dropDown"><span class="MCDropDownHead dropDownHead dropDownHeadCloudianChildDropDown"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="16" width="16" alt="Closed" data-mc-alt2="Open" />Location detail</a></span>
                        <div class="MCDropDownBody dropDownBody">
                            <p>For objects stored locally (objects that are not of type TRANSITIONED), the lower part of the whereis response shows the location of each object replica (for replicated objects) or of each erasure coded object fragment (for EC objects).</p>
                            <p>For HSFS replicated objects each location is specified as:</p><pre xml:space="preserve">[&lt;datacenter&gt; &lt;IP-address&gt; &lt;hostname&gt;] &lt;objectname&gt; file://&lt;IP-address&gt;:&lt;mountpoint&gt;/hsfs/
&lt;base62-encoded-vNode-token&gt;/&lt;policyid&gt;/&lt;000-255&gt;/&lt;000-255&gt;/&lt;filename&gt;</pre>
                            <p>For replicas the objectâ€™s Last Modified timestamp, version, and MD5 digest are indicated as well.</p>
                            <p>For erasure coded object fragments each location is specified as:</p><pre xml:space="preserve">&lt;datacenter&gt; &lt;key-suffix-digit&gt; &lt;IP-address&gt; &lt;hostname&gt; ec://&lt;IP_address&gt;:&lt;mountpoint&gt;/ec/
&lt;base62-encoded-vNode-token&gt;/&lt;policyid&gt;/&lt;000-255&gt;/&lt;000-255&gt;/&lt;filename&gt;</pre>
                            <ul>
                                <li value="1">The <em>&lt;base62-encoded-vNode-token&gt;</em> is a base-62 encoding of the token belonging to the vNode to which the object instance or fragment is assigned (for background information see <a href="../../Introduction/System Diagrams/vNodes.htm" class="MCXref xref">How vNodes Work</a>). </li>
                                <li value="2">The <em>&lt;policyid&gt;</em> segment is the unique identifier of the storage policy applied to the bucket in which the object is stored. </li>
                                <li value="3">The two <em>&lt;000-255&gt;</em> segments of the path are based on a hash of the <em>&lt;filename&gt;</em>, normalized to a 255*255 number. </li>
                                <li value="4">The <em>&lt;filename&gt;</em> is a dot-separated concatenation of the objectâ€™s hash token and the objectâ€™s Last Modified timestamp expressed as Unix time in milliseconds. </li>
                                <li value="5">For EC objects only, the <em>&lt;key_suffix_digit&gt;</em> at the beginning of each location is a digit that the system generates and uses to ensure that each fragment goes to a different node.</li>
                            </ul>
                            <p class="Note" data-mc-autonum="&lt;b&gt;Note &#160;&lt;/b&gt;"><span class="autonumber"><span><b>Note &#160;</b></span></span>If an object replica is supposed to be on a node (according to system metadata) but is missing, the nodeâ€™s IP address is listed in the <em>whereis</em> results along with a message stating "0 replication found" For example, "[10.10.3.52] 0 replication found". This particular feature does not apply for missing erasure coded fragmentsâ€‰â€”â€‰<em>whereis</em> will not report missing fragments.</p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="MCDropDown MCDropDown_Open dropDown"><span class="MCDropDownHead dropDownHead dropDownHeadCloudianParentDropDown"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="16" width="16" alt="Closed" data-mc-alt2="Open" /></a><a name="WhereisLogfile"></a><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_" style="background-image: none; padding: 0px;">Log File for "whereis -a"</a></span>
                <div class="MCDropDownBody dropDownBody">
                    <p>When you use the <em>whereis -a</em> command, information about all replicas of all objects in the entire service region is written to a log file. The log file is written on the HyperStore host that you connect to when you run <em>whereis -a</em>, and by default the log file path is:</p><pre>/var/log/cloudian/whereis.log</pre>
                    <p>This is the same directory in which other HyperStore S3 logs are written. The S3 log directory path is configurable by the setting <a href="../../System Configuration/Configuration Files/CommonCsv.htm#cloudian_log_directory" class="MCTopicPopup MCTopicPopupHotSpot MCXref xref">cloudian_log_directory</a> in <em>common.csv</em>.</p>
                    <p>By default the maximum log file size before rolling is 10MB. This is configurable in the <em>WHEREIS-APPENDER</em> section of the <em>log4j-tools.xml.erb</em> file.</p>
                    <p>In the <em>whereis.log</em> file, the start and completion of the output from a single run of <em>whereis -a</em> is marked by "START"and "END" timestamps. Within those timestamps, the output is organized by user. The start of output for a particular user is marked by "#user:&lt;canonical UID&gt;". This line is then followed by lines for the userâ€™s buckets and objects. Users who do not have any buckets will not be included in the log file.</p>
                    <p>The output of multiple runs of <em>whereis -a </em>may be written to the same log file, depending on the size of the output and on your configuration for log file rolling. Because the output of <em>whereis -a</em> may be very large, itâ€™s possible that the output of a single run may be spread across multiple log files, if maximum file size is reached and log rolling occurs.</p>
                </div>
            </div>
            <p style="font-size: 6pt;margin-top: 0;margin-bottom: 0;">&#160;</p>
        </div>
    </body>
</html>